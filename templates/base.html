<!-- filepath: /Users/guns4kids/Documents/vscode-projects/routine-timer/templates/base.html -->
{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>{% block title %}Routine Timer{% endblock %}</title>
        <link rel="stylesheet" href="{% static 'css/base.css' %}" />
        <script
            defer
            src="https://kit.fontawesome.com/844d1cd656.js"
            crossorigin="anonymous"
        ></script>
        {% block extra_css %}{% endblock %}
    </head>
    <body>
        <div class="grid-container">
            <header>
                <div class="logo">Routine Timer</div>
                <div class="mobile-menu-toggle" id="mobileMenuToggle">
                    <span></span><span></span><span></span>
                </div>
            </header>

            <!-- In your navigation section -->
            <nav class="main-nav">
                <div class="nav-content">
                    <!-- Home link -->
                    <a href="{% url 'home:index' %}" class="nav-item {% if request.resolver_match.view_name == 'home:index' %}active{% endif %}">
                        <i class="fas fa-home icon"></i>
                        <span>Home</span>
                    </a>
                    
                    {% if user.is_authenticated %}
                        <!-- If user is authenticated -->
                        {% if user.profile.is_guest %}
                            <!-- Guest user-->
                            <div class="guest-indicator">
                                <i class="fas fa-user-clock"></i> Guest Mode
                            </div>
                            <!-- Links available to guests -->
                            <a href="{% url 'standalone_timer' %}" class="nav-item">
                                <span>Standalone Timer</span><i class="fas fa-clock icon"></i>
                            </a>
                            <a href="{% url 'routine:builder' %}" class="nav-item {% if request.resolver_match.view_name == 'routine:builder' %}active{% endif %}">
                                <i class="fas fa-plus-circle icon"></i>
                                <span>New Routine</span>
                            </a>
                            <a href="{% url 'routine:timer' %}" class="nav-item {% if request.resolver_match.view_name == 'routine:timer' %}active{% endif %}">
                                <i class="fas fa-clock icon"></i>
                                <span>Timer</span>
                            </a>
                            <a href="{% url 'authentication:login' %}" class="nav-item">
                                <i class="fas fa-save icon"></i>
                                <span>Sign Up to Save</span>
                            </a>
                            <a href="{% url 'authentication:logout' %}" class="nav-item">
                                <i class="fas fa-sign-out-alt icon"></i>
                                <span>End Guest Session</span>
                            </a>
                        {% else %}
                            <!-- Regular user -->
                            <a href="{% url 'routine:builder' %}" class="nav-item {% if request.resolver_match.view_name == 'routine:builder' %}active{% endif %}">
                                <i class="fas fa-plus-circle icon"></i>
                                <span>New Routine</span>
                            </a>
                            <a href="{% url 'routine:timer' %}" class="nav-item {% if request.resolver_match.view_name == 'routine:timer' %}active{% endif %}">
                                <i class="fas fa-clock icon"></i>
                                <span>Start Routine</span>
                            </a>
                            <a href="{% url 'routine:list' %}" class="nav-item {% if request.resolver_match.view_name == 'routine:list' %}active{% endif %}">
                                <i class="fas fa-list icon"></i>
                                <span>My Routines</span>
                            </a>
                            <a href="{% url 'authentication:logout' %}" class="nav-item">
                                <i class="fas fa-sign-out-alt icon"></i>
                                <span>Logout</span>
                            </a>
                        {% endif %}
                    {% else %}
                        <!-- Not authenticated -->
                        <a href="{% url 'authentication:login' %}" class="nav-item">
                            <i class="fas fa-sign-in-alt icon"></i>
                            <span>Login / Register</span>
                        </a>
                    {% endif %}
                    
                    <!-- Contact link -->
                    <a href="{% url 'home:contact' %}" class="nav-item {% if request.resolver_match.view_name == 'home:contact' %}active{% endif %}">
                        <i class="fas fa-envelope icon"></i>
                        <span>Contact Us</span>
                    </a>
                </div>
            </nav>
            <main>
                {% if messages %}
                <div class="messages">
                    {% for message in messages %}
                    <div class="message {{ message.tags }}">
                        {{ message }}
                        <button class="message-close">&times;</button>
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
                {% block content %}{% endblock %}
            </main>

            <footer>
                <p>&copy; {% now "Y" %} Routine-Timer. All rights reserved.</p>
            </footer>
        </div>
        {% block extra_js %}
        <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.14.0/Sortable.min.js"></script>
        <script src="{% static 'js/base.js' %}"></script>
        {% endblock %}
    </body>
</html>